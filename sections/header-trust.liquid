{% comment %}
  TRUST.NO.OUTPUT — Header Section

  A minimalist cyberpunk-inspired header featuring:
  - Text logo with glitch hover effect
  - Centered navigation with color-shift hover
  - Icon-based utilities (Search, Account, Cart)
  - Sticky behavior with backdrop blur on scroll
  - Mobile-responsive with full-screen menu overlay
  - "Reality is under construction" tooltip on logo hover

  Philosophy: The header is a portal—not just navigation,
  but a digital interface that reveals its constructed nature
  through subtle glitches and fragmentations.
{% endcomment %}
{%- comment -%} Header CSS moved to assets/custom.css for cacheability. {%- endcomment -%}

{%- liquid
  assign is_manifesto = false
  if template.name == 'page' and template.suffix == 'manifesto'
    assign is_manifesto = true
  endif
  assign show_transparent = section.settings.transparent_header
  if is_manifesto
    assign show_transparent = false
  endif
-%}

<header
  class="site-header tno-header header--tno {% if show_transparent %}is-transparent{% endif %}"
  id="site-header"
>
  <div class="site-header__inner tno-header__container">
    {%- comment %} Mobile Top Bar (Row 1: Burger + Logo + Icons) {%- endcomment %}
    <div class="tno-header__topbar">
      {%- comment %} Mobile Menu Toggle (Left on Mobile) {%- endcomment %}
      <button
        class="header-menu-toggle tno-header__burger"
        aria-label="Menu"
        id="mobile-menu-toggle"
        aria-expanded="false"
        aria-controls="mobile-menu"
      >
        <span></span>
        <span></span>
        <span></span>
      </button>

      {%- comment %} Logo (Left) {%- endcomment %}
      <div class="header-logo tno-header__logo">
        <a
          href="{{ routes.root_url }}"
          class="header-logo__link"
          data-text="TRUST.NO.OUTPUT"
          data-tooltip="Reality is under construction"
        >
          TRUST.NO.OUTPUT
        </a>
      </div>

      {%- comment %} Icons (Right: Account + Cart only on Mobile) {%- endcomment %}
      <div class="header-icons tno-nav__utility tno-header__icons">
        {%- comment %} Account Icon {%- endcomment %}
        {% if section.settings.show_account %}
          <a
            href="{{ routes.account_url }}"
            class="header-icon header-icon--account tno-header__icon"
            aria-label="Account"
          >
            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
              <circle cx="12" cy="7" r="4"/>
            </svg>
          </a>
        {% endif %}

        {%- comment %} Cart Icon with Badge {%- endcomment %}
        <a
          href="{{ routes.cart_url }}"
          class="header-icon header-icon--cart tno-ico tno-header__icon"
          aria-label="Cart"
        >
          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <circle cx="9" cy="21" r="1"/>
            <circle cx="20" cy="21" r="1"/>
            <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/>
          </svg>
          <span class="cart-badge tno-badge" id="cart-count">
            {{ cart.item_count }}
          </span>
        </a>
      </div>
    </div>

    {%- comment %} Desktop Navigation (Center) - SHOP | SYSTEM | MANIFESTO {%- endcomment %}
    <nav class="header-nav tno-nav" role="navigation" aria-label="Main">
      <ul class="header-nav__list tno-nav__list">
        {%- comment %} SHOP with 4-column mega menu {%- endcomment %}
        <li class="header-nav__item tno-nav__item tno-has-mega">
          <a href="{{ routes.all_products_collection_url }}" class="header-nav__link tno-nav__link">
            SHOP
          </a>
          <button
            class="tno-nav__toggle"
            aria-expanded="false"
            aria-controls="mega-shop-{{ section.id }}"
            aria-label="Toggle Shop menu"
          ></button>
          <div
            class="tno-mega tno-mega--shop"
            id="mega-shop-{{ section.id }}"
            data-panel="mega"
            tabindex="-1"
          >
            {%- comment %} Column 1: APPAREL {%- endcomment %}
            <div class="tno-mega__col">
              <p class="tno-mega__title">// APPAREL</p>
              {%- assign apparel_menu = linklists[section.settings.apparel_menu] -%}
              {%- if apparel_menu and apparel_menu.links and apparel_menu.links.size > 0 -%}
                <ul class="tno-mega__list">
                  {%- for link in apparel_menu.links -%}
                    <li>
                      <a class="tno-mega__link" href="{{ link.url }}">{{ link.title }}</a>
                    </li>
                  {%- endfor -%}
                </ul>
              {%- else -%}
                {%- comment %} Fallback {%- endcomment %}
                <ul class="tno-mega__list">
                  <li>
                    <a class="tno-mega__link" href="{{ routes.collections_url }}/t-shirts"
                      >T-Shirts</a
                    >
                  </li>
                  <li>
                    <a class="tno-mega__link" href="{{ routes.collections_url }}/hoodies"
                      >Hoodies</a
                    >
                  </li>
                  <li>
                    <a class="tno-mega__link" href="{{ routes.collections_url }}/jackets"
                      >Jackets</a
                    >
                  </li>
                </ul>
              {%- endif -%}
            </div>

            {%- comment %} Column 2: ACCESSORIES {%- endcomment %}
            <div class="tno-mega__col">
              <p class="tno-mega__title">// ACCESSORIES</p>
              {%- assign accessories_menu = linklists[section.settings.accessories_menu] -%}
              {%- if accessories_menu
                and accessories_menu.links
                and accessories_menu.links.size > 0
              -%}
                <ul class="tno-mega__list">
                  {%- for link in accessories_menu.links -%}
                    <li>
                      <a class="tno-mega__link" href="{{ link.url }}">{{ link.title }}</a>
                    </li>
                  {%- endfor -%}
                </ul>
              {%- else -%}
                {%- comment %} Fallback {%- endcomment %}
                <ul class="tno-mega__list">
                  <li>
                    <a class="tno-mega__link" href="{{ routes.collections_url }}/bags">Bags</a>
                  </li>
                  <li>
                    <a class="tno-mega__link" href="{{ routes.collections_url }}/hats">Hats</a>
                  </li>
                  <li>
                    <a class="tno-mega__link" href="{{ routes.collections_url }}/accessories"
                      >All Accessories</a
                    >
                  </li>
                </ul>
              {%- endif -%}
            </div>

            {%- comment %} Column 3: COLLECTIONS {%- endcomment %}
            <div class="tno-mega__col">
              <p class="tno-mega__title">// COLLECTIONS</p>
              {%- assign collections_menu = linklists[section.settings.collections_menu] -%}
              {%- if collections_menu and collections_menu.links and collections_menu.links.size > 0 -%}
                <ul class="tno-mega__list">
                  {%- for link in collections_menu.links -%}
                    <li>
                      <a class="tno-mega__link" href="{{ link.url }}">{{ link.title }}</a>
                    </li>
                  {%- endfor -%}
                </ul>
              {%- else -%}
                {%- comment %} Fallback: Common collection series {%- endcomment %}
                <ul class="tno-mega__list">
                  <li>
                    <a class="tno-mega__link" href="{{ routes.collections_url }}/glitch-series"
                      >// GLITCH SERIES</a
                    >
                  </li>
                  <li>
                    <a class="tno-mega__link" href="{{ routes.collections_url }}/dark-aesthetics"
                      >// DARK AESTHETICS</a
                    >
                  </li>
                  <li>
                    <a class="tno-mega__link" href="{{ routes.collections_url }}/source-code"
                      >// SOURCE CODE</a
                    >
                  </li>
                  <li>
                    <a class="tno-mega__link" href="{{ routes.collections_url }}/limited-drops"
                      >// LIMITED DROPS</a
                    >
                  </li>
                </ul>
              {%- endif -%}
            </div>

            {%- comment %} Column 4: PRINTS {%- endcomment %}
            <div class="tno-mega__col">
              <p class="tno-mega__title">// PRINTS</p>
              {%- assign prints_menu = linklists[section.settings.prints_menu] -%}
              {%- if prints_menu and prints_menu.links and prints_menu.links.size > 0 -%}
                <ul class="tno-mega__list">
                  {%- for link in prints_menu.links -%}
                    <li>
                      <a class="tno-mega__link" href="{{ link.url }}">{{ link.title }}</a>
                    </li>
                  {%- endfor -%}
                </ul>
              {%- else -%}
                {%- comment %} Fallback {%- endcomment %}
                <ul class="tno-mega__list">
                  <li>
                    <a class="tno-mega__link" href="{{ routes.collections_url }}/prints"
                      >Art Prints</a
                    >
                  </li>
                  <li>
                    <a class="tno-mega__link" href="{{ routes.collections_url }}/posters"
                      >Posters</a
                    >
                  </li>
                </ul>
              {%- endif -%}
            </div>

            {%- comment %} Column 5: FEATURED (merchandising tile or key links) {%- endcomment %}
            <div class="tno-mega__col tno-mega__col--featured">
              <p class="tno-mega__title">// FEATURED</p>
              {%- if section.settings.featured_collection != blank -%}
                {%- assign featured_col = collections[section.settings.featured_collection] -%}
                {%- if featured_col.image -%}
                  <a href="{{ featured_col.url }}" class="tno-mega__feature-tile">
                    <img
                      src="{{ featured_col.image | image_url: width: 300 }}"
                      alt="{{ featured_col.title | escape }}"
                      loading="lazy"
                      width="300"
                      height="300"
                    >
                    <span class="tno-mega__feature-label">{{ featured_col.title }}</span>
                  </a>
                {%- else -%}
                  <ul class="tno-mega__list">
                    <li>
                      <a class="tno-mega__link" href="{{ featured_col.url }}">
                        {{- featured_col.title -}}
                      </a>
                    </li>
                  </ul>
                {%- endif -%}
              {%- else -%}
                {%- comment %} Fallback: Key merchandising links {%- endcomment %}
                <ul class="tno-mega__list">
                  <li>
                    <a
                      class="tno-mega__link tno-mega__link--highlight"
                      href="{{ routes.collections_url }}/new-arrivals"
                      >New Arrivals</a
                    >
                  </li>
                  <li>
                    <a
                      class="tno-mega__link tno-mega__link--highlight"
                      href="{{ routes.collections_url }}/bestsellers"
                      >Bestsellers</a
                    >
                  </li>
                  <li>
                    <a class="tno-mega__link" href="{{ routes.all_products_collection_url }}"
                      >Shop All</a
                    >
                  </li>
                </ul>
              {%- endif -%}
            </div>
          </div>
        </li>

        {%- comment %} COLLECTIONS {%- endcomment %}
        <li class="header-nav__item tno-nav__item">
          <a
            href="{{ routes.collections_url }}"
            class="header-nav__link tno-nav__link {% if template.name == 'collection' or template.name == 'list-collections' %}is-active{% endif %}"
          >
            COLLECTIONS
          </a>
        </li>

        {%- comment %} MANIFESTO {%- endcomment %}
        <li class="header-nav__item tno-nav__item">
          <a
            href="{{ pages.manifesto.url | default: '/pages/manifesto' }}"
            class="header-nav__link tno-nav__link {% if template.name == 'page' and template.suffix == 'manifesto' %}is-active{% endif %}"
          >
            MANIFESTO
          </a>
        </li>
      </ul>
    </nav>

    {%- comment %}
      Desktop Search & Icons (Right) - Hidden on Mobile
      TNO fix: Keep cart icon visible on desktop by constraining search width
      and preventing the icon group from shrinking (see assets/custom.css).
    {%- endcomment %}
    <div class="header-icons tno-nav__utility tno-header__desktop-utility">
      {%- comment %} Search Field (Desktop, unified with mobile) {%- endcomment %}
      {% if section.settings.show_search %}
        <div class="tno-header__search">
          <div class="tno-search">
            <form
              action="{{ routes.search_url }}"
              method="get"
              role="search"
              class="tno-search__form"
            >
              <input
                type="search"
                name="q"
                value="{{ search.terms | escape }}"
                placeholder="{{ 'general.search.search' | t }}"
                class="tno-search__input"
                aria-label="{{ 'general.search.search' | t }}"
              >
              <button
                type="submit"
                class="tno-search__button"
                aria-label="{{ 'general.search.search' | t }}"
              >
                <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                  <circle cx="11" cy="11" r="8"/>
                  <path d="m21 21-4.35-4.35"/>
                </svg>
              </button>
            </form>
          </div>
        </div>
      {% endif %}

      {%- comment %} Account Icon {%- endcomment %}
      {% if section.settings.show_account %}
        <a
          href="{{ routes.account_url }}"
          class="header-icon header-icon--account"
          aria-label="Account"
        >
          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
            <circle cx="12" cy="7" r="4"/>
          </svg>
        </a>
      {% endif %}

      {%- comment %} Cart Icon with Badge {%- endcomment %}
      <a
        href="{{ routes.cart_url }}"
        class="header-icon header-icon--cart"
        aria-label="Cart"
      >
        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <circle cx="9" cy="21" r="1"/>
          <circle cx="20" cy="21" r="1"/>
          <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/>
        </svg>
        <span class="cart-badge" id="cart-count-desktop">
          {{ cart.item_count }}
        </span>
      </a>
    </div>

    {%- comment %} Mobile Search Bar (Row 2) - Full width below top bar, unified structure {%- endcomment %}
    {% if section.settings.show_search %}
      <div class="tno-header__search-mobile">
        <div class="tno-search">
          <form
            action="{{ routes.search_url }}"
            method="get"
            role="search"
            class="tno-search__form"
          >
            <input
              type="search"
              name="q"
              value="{{ search.terms | escape }}"
              placeholder="{{ 'general.search.search' | t }}"
              class="tno-search__input"
              aria-label="{{ 'general.search.search' | t }}"
            >
            <button
              type="submit"
              class="tno-search__button"
              aria-label="{{ 'general.search.search' | t }}"
            >
              <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <circle cx="11" cy="11" r="8"/>
                <path d="m21 21-4.35-4.35"/>
              </svg>
            </button>
          </form>
        </div>
      </div>
    {% endif %}
  </div>
</header>

{%- comment %} Mobile Menu Overlay – Digitec-style drilldown {%- endcomment %}
<div
  class="mobile-menu"
  id="mobile-menu"
  role="dialog"
  aria-modal="true"
  aria-label="Main menu"
  aria-hidden="true"
  tabindex="-1"
>
  {%- comment %} Load mega menu data sources (same as desktop SHOP) {%- endcomment %}
  {%- assign apparel_menu = linklists[section.settings.apparel_menu] -%}
  {%- assign accessories_menu = linklists[section.settings.accessories_menu] -%}
  {%- assign prints_menu = linklists[section.settings.prints_menu] -%}

  {%- comment %} Root panel: SHOP categories matching desktop mega menu {%- endcomment %}
  <div class="tno-mobile-panel is-root is-active" id="tno-panel-root" data-panel="root">
    <nav class="tno-mobile-panel__content">
      <ul class="tno-mobile-list">
        {%- comment %} SHOP ALL - Top-level link {%- endcomment %}
        <li class="tno-mobile-item">
          <a href="{{ routes.all_products_collection_url }}" class="tno-mobile-link">SHOP ALL</a>
        </li>

        {%- comment %} APPAREL - drilldown only, full-row trigger button {%- endcomment %}
        {%- if apparel_menu and apparel_menu.links.size > 0 -%}
          <li class="tno-mobile-item">
            <button
              type="button"
              class="tno-mobile-row tno-mobile-drill-trigger"
              data-mobile-panel-target="tno-panel-apparel"
              aria-controls="tno-panel-apparel"
              aria-expanded="false"
              aria-label="Open APPAREL submenu"
            >
              <span class="tno-mobile-link tno-mobile-link--drill">APPAREL</span>
              <span class="tno-nav-chevron" aria-hidden="true">
                <svg
                  width="16"
                  height="16"
                  viewBox="0 0 16 16"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path d="M6 3L11 8L6 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </span>
            </button>
          </li>
        {%- else -%}
          <li class="tno-mobile-item">
            <a href="{{ routes.collections_url }}/apparel" class="tno-mobile-link">APPAREL</a>
          </li>
        {%- endif -%}

        {%- comment %} ACCESSORIES - drilldown only, full-row trigger button {%- endcomment %}
        {%- if accessories_menu and accessories_menu.links.size > 0 -%}
          <li class="tno-mobile-item">
            <button
              type="button"
              class="tno-mobile-row tno-mobile-drill-trigger"
              data-mobile-panel-target="tno-panel-accessories"
              aria-controls="tno-panel-accessories"
              aria-expanded="false"
              aria-label="Open ACCESSORIES submenu"
            >
              <span class="tno-mobile-link tno-mobile-link--drill">ACCESSORIES</span>
              <span class="tno-nav-chevron" aria-hidden="true">
                <svg
                  width="16"
                  height="16"
                  viewBox="0 0 16 16"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path d="M6 3L11 8L6 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </span>
            </button>
          </li>
        {%- else -%}
          <li class="tno-mobile-item">
            <a href="{{ routes.collections_url }}/accessories" class="tno-mobile-link"
              >ACCESSORIES</a
            >
          </li>
        {%- endif -%}

        {%- comment %} PRINTS - drilldown only, full-row trigger button {%- endcomment %}
        {%- if prints_menu and prints_menu.links.size > 0 -%}
          <li class="tno-mobile-item">
            <button
              type="button"
              class="tno-mobile-row tno-mobile-drill-trigger"
              data-mobile-panel-target="tno-panel-prints"
              aria-controls="tno-panel-prints"
              aria-expanded="false"
              aria-label="Open PRINTS submenu"
            >
              <span class="tno-mobile-link tno-mobile-link--drill">PRINTS</span>
              <span class="tno-nav-chevron" aria-hidden="true">
                <svg
                  width="16"
                  height="16"
                  viewBox="0 0 16 16"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path d="M6 3L11 8L6 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </span>
            </button>
          </li>
        {%- else -%}
          <li class="tno-mobile-item">
            <a href="{{ routes.collections_url }}/prints" class="tno-mobile-link">PRINTS</a>
          </li>
        {%- endif -%}

        {%- comment %} FEATURED - Simple links without drilldown {%- endcomment %}
        <li class="tno-mobile-item">
          <div class="tno-mobile-featured">
            <span class="tno-mobile-link tno-mobile-link--section">FEATURED</span>
            <ul class="tno-mobile-sublist">
              <li>
                <a href="{{ routes.collections_url }}/new-arrivals" class="tno-mobile-sublink"
                  >NEW ARRIVALS</a
                >
              </li>
              <li>
                <a href="{{ routes.collections_url }}/bestsellers" class="tno-mobile-sublink"
                  >BESTSELLERS</a
                >
              </li>
              <li>
                <a href="{{ routes.all_products_collection_url }}" class="tno-mobile-sublink"
                  >SHOP ALL</a
                >
              </li>
            </ul>
          </div>
        </li>

        {%- comment %} Secondary Navigation Section {%- endcomment %}
        <li class="tno-mobile-item tno-mobile-divider" aria-hidden="true"></li>

        {%- comment %} COLLECTIONS {%- endcomment %}
        <li class="tno-mobile-item">
          <a
            href="{{ routes.collections_url }}"
            class="tno-mobile-link tno-mobile-link--secondary"
            >COLLECTIONS</a
          >
        </li>

        {%- comment %} MANIFESTO {%- endcomment %}
        <li class="tno-mobile-item">
          <a
            href="{{ pages['manifesto'].url | default: '/pages/manifesto' }}"
            class="tno-mobile-link tno-mobile-link--secondary"
            >MANIFESTO</a
          >
        </li>
      </ul>
    </nav>
  </div>

  {%- comment %} Child panels: APPAREL submenu {%- endcomment %}
  {%- if apparel_menu and apparel_menu.links.size > 0 -%}
    <div
      class="tno-mobile-panel is-child"
      id="tno-panel-apparel"
      data-panel="child"
      data-parent="root"
    >
      <div class="tno-mobile-back-header">
        <button class="tno-mobile-back" data-back="tno-panel-root" aria-label="Back to main menu">
          <svg
            width="16"
            height="16"
            viewBox="0 0 16 16"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path d="M10 3L5 8L10 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <span>Back</span>
        </button>
        <span class="tno-mobile-back-title">APPAREL</span>
      </div>
      <nav class="tno-mobile-panel__content">
        <ul class="tno-mobile-list">
          {%- for link in apparel_menu.links -%}
            <li class="tno-mobile-item">
              <a href="{{ link.url }}" class="tno-mobile-link">{{ link.title }}</a>
            </li>
          {%- endfor -%}
        </ul>
      </nav>
    </div>
  {%- endif -%}

  {%- comment %} Child panels: ACCESSORIES submenu {%- endcomment %}
  {%- if accessories_menu and accessories_menu.links.size > 0 -%}
    <div
      class="tno-mobile-panel is-child"
      id="tno-panel-accessories"
      data-panel="child"
      data-parent="root"
    >
      <div class="tno-mobile-back-header">
        <button class="tno-mobile-back" data-back="tno-panel-root" aria-label="Back to main menu">
          <svg
            width="16"
            height="16"
            viewBox="0 0 16 16"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path d="M10 3L5 8L10 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <span>Back</span>
        </button>
        <span class="tno-mobile-back-title">ACCESSORIES</span>
      </div>
      <nav class="tno-mobile-panel__content">
        <ul class="tno-mobile-list">
          {%- for link in accessories_menu.links -%}
            <li class="tno-mobile-item">
              <a href="{{ link.url }}" class="tno-mobile-link">{{ link.title }}</a>
            </li>
          {%- endfor -%}
        </ul>
      </nav>
    </div>
  {%- endif -%}

  {%- comment %} Child panels: PRINTS submenu {%- endcomment %}
  {%- if prints_menu and prints_menu.links.size > 0 -%}
    <div
      class="tno-mobile-panel is-child"
      id="tno-panel-prints"
      data-panel="child"
      data-parent="root"
    >
      <div class="tno-mobile-back-header">
        <button class="tno-mobile-back" data-back="tno-panel-root" aria-label="Back to main menu">
          <svg
            width="16"
            height="16"
            viewBox="0 0 16 16"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path d="M10 3L5 8L10 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <span>Back</span>
        </button>
        <span class="tno-mobile-back-title">PRINTS</span>
      </div>
      <nav class="tno-mobile-panel__content">
        <ul class="tno-mobile-list">
          {%- for link in prints_menu.links -%}
            <li class="tno-mobile-item">
              <a href="{{ link.url }}" class="tno-mobile-link">{{ link.title }}</a>
            </li>
          {%- endfor -%}
        </ul>
      </nav>
    </div>
  {%- endif -%}
</div>

{%- comment -%} Inline script removed; logic now resides in assets/header.js {%- endcomment -%}

{%- comment %} Mobile Bottom Tab Bar – App-like navigation {%- endcomment %}
<nav
  class="tno-bottom-tabs"
  id="bottom-tabs"
  role="navigation"
  aria-label="Mobile bottom navigation"
>
  <a
    href="{{ routes.root_url }}"
    class="tno-tab {% if template.name == 'index' %}is-active{% endif %}"
    aria-label="Home"
  >
    <svg class="tno-tab__icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      <path d="M9 22V12h6v10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
    <span class="tno-tab__label">Home</span>
  </a>

  <a
    href="{{ routes.all_products_collection_url }}"
    class="tno-tab tno-tab--shop {% if template.name == 'collection' or template.name == 'product' %}is-active{% endif %}"
    aria-label="Shop"
  >
    <svg class="tno-tab__icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <circle cx="9" cy="21" r="1" stroke="currentColor" stroke-width="2"/>
      <circle cx="20" cy="21" r="1" stroke="currentColor" stroke-width="2"/>
      <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
    <span class="tno-tab__label">Shop</span>
    {%- comment -%} Cart badge with 99+ cap for readability {%- endcomment -%}
    {% if cart != empty and cart.item_count > 0 %}
      <span class="tno-tab__badge">
        {%- if cart.item_count > 99 -%}99+{%- else -%}{{ cart.item_count }}{%- endif -%}
      </span>
    {% endif %}
  </a>

  <a
    href="{{ routes.account_url }}"
    class="tno-tab {% if template.name == 'customers/account' or template.name == 'customers/login' %}is-active{% endif %}"
    aria-label="Account"
  >
    <svg class="tno-tab__icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      <circle cx="12" cy="7" r="4" stroke="currentColor" stroke-width="2"/>
    </svg>
    <span class="tno-tab__label">Account</span>
  </a>

  <button
    class="tno-tab"
    id="bottom-tab-menu"
    aria-label="Menu"
    aria-expanded="false"
    aria-controls="mobile-menu"
  >
    <svg class="tno-tab__icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <line x1="3" y1="6" x2="21" y2="6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      <line x1="3" y1="12" x2="21" y2="12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      <line x1="3" y1="18" x2="21" y2="18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
    </svg>
    <span class="tno-tab__label">Menu</span>
  </button>
</nav>

{% schema %}
{
  "name": "Header (TNO)",
  "settings": [
    {
      "type": "header",
      "content": "Header Settings"
    },
    {
      "type": "checkbox",
      "id": "sticky_header",
      "label": "Enable Sticky Header",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_search",
      "label": "Show Search Icon",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_account",
      "label": "Show Account Icon",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "transparent_header",
      "label": "Transparent header",
      "default": true
    },
    {
      "type": "header",
      "content": "SHOP Mega Menu (4 columns)"
    },
    {
      "type": "link_list",
      "id": "apparel_menu",
      "label": "APPAREL menu",
      "info": "Links for the APPAREL column"
    },
    {
      "type": "link_list",
      "id": "accessories_menu",
      "label": "ACCESSORIES menu",
      "info": "Links for the ACCESSORIES column"
    },
    {
      "type": "link_list",
      "id": "collections_menu",
      "label": "COLLECTIONS menu",
      "info": "Links for the COLLECTIONS column (e.g., GLITCH SERIES, DARK AESTHETICS, SOURCE CODE, LIMITED DROPS)"
    },
    {
      "type": "link_list",
      "id": "prints_menu",
      "label": "PRINTS menu",
      "info": "Links for the PRINTS column"
    },
    {
      "type": "collection",
      "id": "featured_collection",
      "label": "FEATURED collection",
      "info": "Featured collection with image tile. If no image, will show links instead."
    },
    {
      "type": "header",
      "content": "Mobile Navigation"
    },
    {
      "type": "link_list",
      "id": "mobile_menu",
      "label": "Mobile menu",
      "default": "main-menu",
      "info": "Menu for mobile drilldown navigation"
    }
  ],
  "enabled_on": {
    "groups": ["header"]
  }
}
{% endschema %}
