{% comment %}
  TNO HIGH-CONVERSION PRODUCT DETAIL PAGE – REFACTORED v2.0

  Architecture:
  - Desktop (≥1024px): 60/40 sticky split (media left 60%, info sticky right 40%)
  - Mobile (<1024px): Single stream with sticky ATC bar
  - Metafield-driven content (subtitle, material, fit, print, fulfillment, care, 3D model)
  - Theme Editor optimized with configurable blocks
  - Class naming: tno-product__ / tno-spec__
  - Glitch aesthetic: ONLY on non-critical elements
  - Accessibility: WCAG 2.1 AA, keyboard nav, reduced motion support
{% endcomment %}

<product-info
  id="MainProduct-{{ section.id }}"
  class="tno-product section-{{ section.id }}-padding gradient color-{{ section.settings.color_scheme }}"
  data-section="{{ section.id }}"
  data-product-id="{{ product.id }}"
  data-update-url="true"
  data-url="{{ product.url }}"
  {% if section.settings.image_zoom == 'hover' %}
    data-zoom-on-hover
  {% endif %}
>
  {{ 'section-main-product.css' | asset_url | stylesheet_tag }}
  {{ 'component-accordion.css' | asset_url | stylesheet_tag }}
  {{ 'component-price.css' | asset_url | stylesheet_tag }}
  {{ 'component-slider.css' | asset_url | stylesheet_tag }}
  {{ 'component-rating.css' | asset_url | stylesheet_tag }}
  {{ 'component-deferred-media.css' | asset_url | stylesheet_tag }}

  {% unless product.has_only_default_variant %}
    {{ 'component-product-variant-picker.css' | asset_url | stylesheet_tag }}
    {{ 'component-swatch-input.css' | asset_url | stylesheet_tag }}
    {{ 'component-swatch.css' | asset_url | stylesheet_tag }}
  {% endunless %}
  {%- if product.quantity_price_breaks_configured? -%}
    {{ 'component-volume-pricing.css' | asset_url | stylesheet_tag }}
  {%- endif -%}

  {%- style -%}
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top | times: 0.75 | round: 0 }}px;
      padding-bottom: {{ section.settings.padding_bottom | times: 0.75 | round: 0 }}px;
    }

    @media screen and (min-width: 750px) {
      .section-{{ section.id }}-padding {
        padding-top: {{ section.settings.padding_top }}px;
        padding-bottom: {{ section.settings.padding_bottom }}px;
      }
    }
  {%- endstyle -%}

  <script src="{{ 'product-info.js' | asset_url }}" defer="defer"></script>
  <script src="{{ 'product-form.js' | asset_url }}" defer="defer"></script>
  {%- if product.quantity_price_breaks_configured? -%}
    <script src="{{ 'show-more.js' | asset_url }}" defer="defer"></script>
    <script src="{{ 'price-per-item.js' | asset_url }}" defer="defer"></script>
  {%- endif -%}

  {% if section.settings.image_zoom == 'hover' %}
    <script id="EnableZoomOnHover-main" src="{{ 'magnify.js' | asset_url }}" defer="defer"></script>
  {% endif %}
  {%- if request.design_mode -%}
    <script src="{{ 'theme-editor.js' | asset_url }}" defer="defer"></script>
  {%- endif -%}

  {%- assign first_3d_model = product.media | where: 'media_type', 'model' | first -%}
  {%- if first_3d_model -%}
    {{ 'component-product-model.css' | asset_url | stylesheet_tag }}
    <link
      id="ModelViewerStyle"
      rel="stylesheet"
      href="https://cdn.shopify.com/shopifycloud/model-viewer-ui/assets/v1.0/model-viewer-ui.css"
      media="print"
      onload="this.media='all'"
    >
    <link
      id="ModelViewerOverride"
      rel="stylesheet"
      href="{{ 'component-model-viewer-ui.css' | asset_url }}"
      media="print"
      onload="this.media='all'"
    >
  {%- endif -%}

  {% assign variant_images = product.images | where: 'attached_to_variant?', true | map: 'src' %}

  <div class="page-width">
    {%- comment -%} ABOVE THE FOLD: Sticky Split Desktop / Single Stream Mobile {%- endcomment -%}
    <div class="tno-product__above-fold">
      {%- comment -%} LEFT: Media Gallery (60%) {%- endcomment -%}
      <div class="tno-product__media-column">
        {% render 'product-media-gallery', variant_images: variant_images %}

        {%- comment -%} 3D Model Viewer (if metafield present) {%- endcomment -%}
        {%- if product.metafields.custom.three_d_model_url.value != blank -%}
          <div class="tno-product__3d-viewer">
            <button
              type="button"
              class="tno-product__3d-trigger button button--secondary"
              data-3d-toggle
              aria-label="View 3D model"
            >
              <svg class="icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/>
                <polyline points="3.27 6.96 12 12.01 20.73 6.96"/>
                <line x1="12" y1="22.08" x2="12" y2="12"/>
              </svg>
              <span>View 3D Model</span>
            </button>
            <div class="tno-product__3d-container" hidden>
              <iframe
                src="{{ product.metafields.custom.three_d_model_url.value }}"
                class="tno-product__3d-iframe"
                frameborder="0"
                allowfullscreen
                loading="lazy"
              ></iframe>
              <button
                type="button"
                class="tno-product__3d-close"
                data-3d-close
                aria-label="Close 3D viewer"
              >
                <span class="svg-wrapper">{{- 'icon-close.svg' | inline_asset_content -}}</span>
              </button>
            </div>
          </div>
        {%- endif -%}
      </div>

      {%- comment -%} RIGHT: Info + CTA Block (40%, sticky on desktop) {%- endcomment -%}
      <div class="tno-product__info-column{% if section.settings.enable_sticky_info %} tno-product__info-column--sticky{% endif %}">
        <div class="tno-product__info-wrapper">
          {%- assign product_form_id = 'product-form-' | append: section.id -%}

          {%- comment -%} RENDER BLOCKS IN ORDER FROM THEME EDITOR {%- endcomment -%}
          {%- for block in section.blocks -%}
            {%- case block.type -%}
              {%- when 'title' -%}
                <div class="tno-product__header" {{ block.shopify_attributes }}>
                  <h1 class="tno-product__title" data-glitch-text="{{ product.title | escape }}">
                    {{ product.title | escape }}
                  </h1>
                  {%- comment -%} Subtitle from metafield (custom.subtitle) {%- endcomment -%}
                  {%- if product.metafields.custom.subtitle.value != blank -%}
                    <p class="tno-product__subtitle">{{ product.metafields.custom.subtitle.value | escape }}</p>
                  {%- endif -%}
                </div>

              {%- when 'price' -%}
                <div class="tno-product__price" id="price-{{ section.id }}" role="status" {{ block.shopify_attributes }}>
                  {%- render 'price',
                    product: product,
                    use_variant: true,
                    show_badges: true,
                    price_class: 'price--large'
                  -%}
                </div>

              {%- when 'reviews' -%}
                <div class="tno-product__reviews-snippet" {{ block.shopify_attributes }}>
                  {%- if product.metafields.reviews.rating.value != blank -%}
                    {% liquid
                      assign rating_decimal = 0
                      assign decimal = product.metafields.reviews.rating.value.rating | modulo: 1
                      if decimal >= 0.3 and decimal <= 0.7
                        assign rating_decimal = 0.5
                      elsif decimal > 0.7
                        assign rating_decimal = 1
                      endif
                    %}
                    <div class="tno-product__rating-wrapper">
                      <div
                        class="tno-product__rating-stars"
                        role="img"
                        aria-label="{{ 'accessibility.star_reviews_info' | t: rating_value: product.metafields.reviews.rating.value, rating_max: product.metafields.reviews.rating.value.scale_max }}"
                      >
                        <span
                          aria-hidden="true"
                          class="rating-star"
                          style="--rating: {{ product.metafields.reviews.rating.value.rating | floor }}; --rating-max: {{ product.metafields.reviews.rating.value.scale_max }}; --rating-decimal: {{ rating_decimal }};"
                        ></span>
                      </div>
                      <a href="#tno-product-reviews" class="tno-product__rating-link">
                        <span class="tno-product__rating-text">
                          {{ product.metafields.reviews.rating.value }} (
                          {{- product.metafields.reviews.rating_count -}}
                          )
                        </span>
                      </a>
                    </div>
                  {%- else -%}
                    <a href="#tno-product-reviews" class="tno-product__write-review-link"> Write a review </a>
                  {%- endif -%}
                </div>

              {%- when 'variant_picker' -%}
                <div class="tno-product__variants" {{ block.shopify_attributes }}>
                  {%
                    render 'product-variant-picker',
                    product: product,
                    block: block,
                    product_form_id: product_form_id
                  %}
                </div>

              {%- when 'size_chart' -%}
                <div class="tno-product__sizing" {{ block.shopify_attributes }}>
                  <div class="tno-product__sizing-actions">
                    {%- if block.settings.show_find_my_size -%}
                      <button
                        type="button"
                        class="tno-product__find-my-size-btn"
                        data-modal-trigger="find-my-size"
                        aria-haspopup="dialog"
                      >
                        <svg
                          class="tno-product__sizing-icon"
                          viewBox="0 0 24 24"
                          xmlns="http://www.w3.org/2000/svg"
                        >
                          <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                          <circle cx="12" cy="7" r="4"/>
                        </svg>
                        <span>Find My Size</span>
                      </button>
                    {%- endif -%}
                    <button
                      type="button"
                      class="tno-product__size-chart-btn"
                      data-modal-trigger="size-chart"
                      aria-haspopup="dialog"
                    >
                      Size Chart
                    </button>
                  </div>
                </div>

              {%- when 'quantity' -%}
                <div class="tno-product__quantity" {{ block.shopify_attributes }}>
                  <label for="Quantity-{{ section.id }}" class="tno-product__quantity-label">
                    {{ 'products.product.quantity.label' | t }}
                  </label>
                  <quantity-input
                    class="quantity"
                    data-url="{{ product.url }}"
                    data-section="{{ section.id }}"
                  >
                    <button class="quantity__button" name="minus" type="button">
                      <span class="visually-hidden">Decrease quantity</span>
                      <span class="svg-wrapper">{{- 'icon-minus.svg' | inline_asset_content -}}</span>
                    </button>
                    <input
                      class="quantity__input"
                      type="number"
                      name="quantity"
                      id="Quantity-{{ section.id }}"
                      min="1"
                      value="1"
                      form="{{ product_form_id }}"
                    >
                    <button class="quantity__button" name="plus" type="button">
                      <span class="visually-hidden">Increase quantity</span>
                      <span class="svg-wrapper">{{- 'icon-plus.svg' | inline_asset_content -}}</span>
                    </button>
                  </quantity-input>
                </div>

              {%- when 'buy_buttons' -%}
                <div class="tno-product__cta-block" {{ block.shopify_attributes }}>
                  {%- liquid
                    assign gift_card_recipient_feature_active = false
                    if block.settings.show_gift_card_recipient and product.gift_card?
                      assign gift_card_recipient_feature_active = true
                    endif

                    assign show_dynamic_checkout = false
                    if block.settings.show_dynamic_checkout and gift_card_recipient_feature_active == false
                      assign show_dynamic_checkout = true
                    endif
                  -%}

                  <product-form
                    class="product-form"
                    data-hide-errors="{{ gift_card_recipient_feature_active }}"
                    data-section-id="{{ section.id }}"
                  >
                    <div class="product-form__error-message-wrapper" role="alert" hidden>
                      <span class="svg-wrapper">{{- 'icon-error.svg' | inline_asset_content -}}</span>
                      <span class="product-form__error-message"></span>
                    </div>

                    {%- form 'product',
                      product,
                      id: product_form_id,
                      class: 'form',
                      novalidate: 'novalidate',
                      data-type: 'add-to-cart-form'
                    -%}
                      <input
                        type="hidden"
                        name="id"
                        value="{{ product.selected_or_first_available_variant.id }}"
                        class="product-variant-id"
                      >

                      <div class="tno-product__primary-cta">
                        <button
                          id="ProductSubmitButton-{{ section.id }}"
                          type="submit"
                          name="add"
                          class="tno-product__add-to-cart button button--full-width button--primary"
                          {% if product.selected_or_first_available_variant.available == false %}
                            disabled
                          {% endif %}
                        >
                          <span>
                            {%- if product.selected_or_first_available_variant.available == false -%}
                              {{ 'products.product.sold_out' | t | upcase }}
                            {%- else -%}
                              {{ block.settings.button_text | default: 'ADD TO CART' }}
                            {%- endif -%}
                          </span>
                          {%- render 'loading-spinner' -%}
                        </button>
                      </div>

                      {%- if show_dynamic_checkout -%}
                        <div class="tno-product__secondary-cta">
                          {{ form | payment_button }}
                        </div>
                      {%- endif -%}
                    {%- endform -%}
                  </product-form>
                </div>

              {%- when 'trust_cluster' -%}
                <div class="tno-product__trust-cluster" {{ block.shopify_attributes }}>
                  <ul class="tno-product__trust-list">
                    {%- comment -%} Material (from custom.material metafield) {%- endcomment -%}
                    {%- if block.settings.show_material and product.metafields.custom.material.value != blank -%}
                      <li class="tno-product__trust-item">
                        <span class="tno-product__trust-icon">●</span>
                        <span class="tno-product__trust-text">
                          <strong>MATERIAL:</strong> {{ product.metafields.custom.material.value | escape }}
                        </span>
                      </li>
                    {%- endif -%}

                    {%- comment -%} Fit (from custom.fit metafield) {%- endcomment -%}
                    {%- if block.settings.show_fit and product.metafields.custom.fit.value != blank -%}
                      <li class="tno-product__trust-item">
                        <span class="tno-product__trust-icon">●</span>
                        <span class="tno-product__trust-text">
                          <strong>FIT:</strong> {{ product.metafields.custom.fit.value | escape }}
                        </span>
                      </li>
                    {%- endif -%}

                    {%- comment -%} Print Method (from custom.print metafield) {%- endcomment -%}
                    {%- if block.settings.show_print and product.metafields.custom.print.value != blank -%}
                      <li class="tno-product__trust-item">
                        <span class="tno-product__trust-icon">●</span>
                        <span class="tno-product__trust-text">
                          <strong>PRINT:</strong> {{ product.metafields.custom.print.value | escape }}
                        </span>
                      </li>
                    {%- endif -%}

                    {%- comment -%} Fulfillment Info (from custom.fulfillment_info metafield) {%- endcomment -%}
                    {%- if block.settings.show_fulfillment and product.metafields.custom.fulfillment_info.value != blank -%}
                      <li class="tno-product__trust-item">
                        <span class="tno-product__trust-icon">●</span>
                        <span class="tno-product__trust-text">
                          <strong>DELIVERY:</strong> {{ product.metafields.custom.fulfillment_info.value | escape | newline_to_br }}
                        </span>
                      </li>
                    {%- endif -%}

                    {%- comment -%} Care Instructions (from custom.care_instructions metafield) {%- endcomment -%}
                    {%- if block.settings.show_care and product.metafields.custom.care_instructions.value != blank -%}
                      <li class="tno-product__trust-item">
                        <span class="tno-product__trust-icon">●</span>
                        <span class="tno-product__trust-text">
                          <strong>CARE:</strong> {{ product.metafields.custom.care_instructions.value | escape | newline_to_br }}
                        </span>
                      </li>
                    {%- endif -%}

                    {%- comment -%} Static trust items (always visible) {%- endcomment -%}
                    {%- if block.settings.show_static_trust -%}
                      <li class="tno-product__trust-item">
                        <span class="tno-product__trust-icon">●</span>
                        <span class="tno-product__trust-text">
                          <strong>30-DAY RETURNS</strong> on unworn items
                        </span>
                      </li>
                      <li class="tno-product__trust-item">
                        <span class="tno-product__trust-icon">●</span>
                        <span class="tno-product__trust-text">
                          <strong>SECURE CHECKOUT</strong> • Encrypted payment
                        </span>
                      </li>
                    {%- endif -%}
                  </ul>
                </div>

              {%- when 'delivery' -%}
                <div class="tno-product__bnpl" {{ block.shopify_attributes }}>
                  {%- assign bnpl_price = product.selected_or_first_available_variant.price
                    | divided_by: 4
                  -%}
                  <p class="tno-product__bnpl-text">
                    Or 4 interest-free payments of <strong>{{ bnpl_price | money }}</strong> with
                    {{ block.settings.payment_provider | default: 'Klarna/Afterpay' }}
                  </p>
                </div>

              {%- when 'description' -%}
                {%- if product.description != blank -%}
                  <div class="tno-product__description rte" {{ block.shopify_attributes }}>
                    {{ product.description }}
                  </div>
                {%- endif -%}

              {%- when 'sharing' -%}
                <div class="tno-product__sharing" {{ block.shopify_attributes }}>
                  {% render 'share-button', block: block, product: product %}
                </div>

              {%- when '@app' -%}
                <div class="tno-product__app-block" {{ block.shopify_attributes }}>
                  {% render block %}
                </div>

            {%- endcase -%}
          {%- endfor -%}
        </div>
      </div>
    </div>

    {%- comment -%} BELOW THE FOLD: Single Column Story + Spec + Reviews {%- endcomment -%}
    <div class="tno-product__below-fold">
      {%- comment -%} 1. PRODUCT STORY {%- endcomment -%}
      {%- if product.description != blank and section.settings.show_story_section -%}
        <section class="tno-product__story" aria-labelledby="tno-product-story-heading">
          <h2 id="tno-product-story-heading" class="tno-product__section-title">PRODUCT.STORY</h2>
          <div class="tno-product__story-content rte">
            {{ product.description }}
          </div>
        </section>
      {%- endif -%}

      {%- comment -%} 2. SPEC SHEET (metafield-driven) {%- endcomment -%}
      {%- if section.settings.show_specs_section -%}
        <section class="tno-product__specs" aria-labelledby="tno-product-specs-heading">
          <h2 id="tno-product-specs-heading" class="tno-product__section-title">SPECIFICATIONS</h2>
          <dl class="tno-spec__list">
            {%- comment -%} Material {%- endcomment -%}
            {%- if product.metafields.custom.material.value != blank -%}
              <div class="tno-spec__row">
                <dt class="tno-spec__term">MATERIAL</dt>
                <dd class="tno-spec__value">{{ product.metafields.custom.material.value | escape }}</dd>
              </div>
            {%- endif -%}

            {%- comment -%} Fit {%- endcomment -%}
            {%- if product.metafields.custom.fit.value != blank -%}
              <div class="tno-spec__row">
                <dt class="tno-spec__term">FIT</dt>
                <dd class="tno-spec__value">{{ product.metafields.custom.fit.value | escape }}</dd>
              </div>
            {%- endif -%}

            {%- comment -%} Print Method {%- endcomment -%}
            {%- if product.metafields.custom.print.value != blank -%}
              <div class="tno-spec__row">
                <dt class="tno-spec__term">PRINT</dt>
                <dd class="tno-spec__value">{{ product.metafields.custom.print.value | escape }}</dd>
              </div>
            {%- endif -%}

            {%- comment -%} Care Instructions {%- endcomment -%}
            {%- if product.metafields.custom.care_instructions.value != blank -%}
              <div class="tno-spec__row">
                <dt class="tno-spec__term">CARE</dt>
                <dd class="tno-spec__value">{{ product.metafields.custom.care_instructions.value | escape | newline_to_br }}</dd>
              </div>
            {%- endif -%}
          </dl>
        </section>
      {%- endif -%}

      {%- comment -%} 3. UGC / REVIEWS SECTION {%- endcomment -%}
      {%- if section.settings.show_reviews_section -%}
        <section
          class="tno-product__reviews"
          id="tno-product-reviews"
          aria-labelledby="tno-product-reviews-heading"
        >
          <h2 id="tno-product-reviews-heading" class="tno-product__section-title">REVIEWS.UGC</h2>
          <div class="tno-product__reviews-placeholder">
            {%- comment -%} Placeholder for reviews app integration {%- endcomment -%}
            <p class="tno-product__reviews-coming-soon">
              Review integration placeholder • Connect your reviews app here
            </p>
          </div>
        </section>
      {%- endif -%}
    </div>
  </div>

  {%- comment -%} MOBILE STICKY ATC BAR {%- endcomment -%}
  <div class="tno-product__sticky-atc" id="tno-sticky-atc" hidden>
    <div class="tno-product__sticky-atc-inner page-width">
      <div class="tno-product__sticky-atc-info">
        <span class="tno-product__sticky-atc-price">
          {{ product.selected_or_first_available_variant.price | money }}
        </span>
        <span class="tno-product__sticky-atc-variant" id="tno-sticky-atc-variant">
          {%- if product.has_only_default_variant -%}
            {{ product.title | truncate: 30 }}
          {%- else -%}
            Select size
          {%- endif -%}
        </span>
      </div>
      <button
        type="button"
        class="tno-product__sticky-atc-btn button button--primary"
        data-sticky-atc-trigger
      >
        ADD TO CART
      </button>
    </div>
  </div>
</product-info>

{% schema %}
{
  "name": "TNO Product Page",
  "tag": "section",
  "class": "section",
  "disabled_on": {
    "groups": ["header", "footer"]
  },
  "settings": [
    {
      "type": "checkbox",
      "id": "enable_sticky_info",
      "default": true,
      "label": "Enable sticky info column (desktop)"
    },
    {
      "type": "select",
      "id": "image_zoom",
      "options": [
        {
          "value": "lightbox",
          "label": "Lightbox"
        },
        {
          "value": "hover",
          "label": "Hover zoom"
        },
        {
          "value": "none",
          "label": "None"
        }
      ],
      "default": "lightbox",
      "label": "Image zoom"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "scheme-1"
    },
    {
      "type": "header",
      "content": "Below-fold sections"
    },
    {
      "type": "checkbox",
      "id": "show_story_section",
      "default": true,
      "label": "Show product story section"
    },
    {
      "type": "checkbox",
      "id": "show_specs_section",
      "default": true,
      "label": "Show specifications section"
    },
    {
      "type": "checkbox",
      "id": "show_reviews_section",
      "default": true,
      "label": "Show reviews section"
    },
    {
      "type": "header",
      "content": "Section padding"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Padding top",
      "default": 36
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Padding bottom",
      "default": 36
    }
  ],
  "blocks": [
    {
      "type": "title",
      "name": "Title",
      "limit": 1
    },
    {
      "type": "price",
      "name": "Price",
      "limit": 1
    },
    {
      "type": "reviews",
      "name": "Review stars",
      "limit": 1
    },
    {
      "type": "variant_picker",
      "name": "Variant picker",
      "limit": 1,
      "settings": [
        {
          "type": "select",
          "id": "picker_type",
          "options": [
            {
              "value": "dropdown",
              "label": "Dropdown"
            },
            {
              "value": "button",
              "label": "Buttons"
            }
          ],
          "default": "button",
          "label": "Type"
        }
      ]
    },
    {
      "type": "size_chart",
      "name": "Size chart",
      "limit": 1,
      "settings": [
        {
          "type": "checkbox",
          "id": "show_find_my_size",
          "default": true,
          "label": "Show 'Find My Size' button"
        }
      ]
    },
    {
      "type": "quantity",
      "name": "Quantity selector",
      "limit": 1
    },
    {
      "type": "buy_buttons",
      "name": "Buy buttons",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "button_text",
          "default": "ADD TO CART",
          "label": "Add to cart button text"
        },
        {
          "type": "checkbox",
          "id": "show_dynamic_checkout",
          "default": true,
          "label": "Show dynamic checkout buttons"
        },
        {
          "type": "checkbox",
          "id": "show_gift_card_recipient",
          "default": false,
          "label": "Show gift card recipient information form"
        }
      ]
    },
    {
      "type": "trust_cluster",
      "name": "Trust cluster / Specs",
      "limit": 1,
      "settings": [
        {
          "type": "paragraph",
          "content": "Toggle which product specifications to display. Values are pulled from product metafields (custom.material, custom.fit, custom.print, custom.fulfillment_info, custom.care_instructions)."
        },
        {
          "type": "checkbox",
          "id": "show_material",
          "default": true,
          "label": "Show material"
        },
        {
          "type": "checkbox",
          "id": "show_fit",
          "default": true,
          "label": "Show fit"
        },
        {
          "type": "checkbox",
          "id": "show_print",
          "default": true,
          "label": "Show print method"
        },
        {
          "type": "checkbox",
          "id": "show_fulfillment",
          "default": true,
          "label": "Show fulfillment / delivery info"
        },
        {
          "type": "checkbox",
          "id": "show_care",
          "default": true,
          "label": "Show care instructions"
        },
        {
          "type": "checkbox",
          "id": "show_static_trust",
          "default": true,
          "label": "Show static trust badges (returns, secure checkout)"
        }
      ]
    },
    {
      "type": "delivery",
      "name": "Delivery / BNPL",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "payment_provider",
          "default": "Klarna/Afterpay",
          "label": "BNPL payment provider name"
        }
      ]
    },
    {
      "type": "description",
      "name": "Product description",
      "limit": 1
    },
    {
      "type": "sharing",
      "name": "Social sharing",
      "limit": 1
    },
    {
      "type": "related_products",
      "name": "Related products",
      "limit": 1
    },
    {
      "type": "@app"
    }
  ],
  "presets": [
    {
      "name": "TNO Product Page",
      "blocks": [
        {
          "type": "title"
        },
        {
          "type": "price"
        },
        {
          "type": "reviews"
        },
        {
          "type": "variant_picker"
        },
        {
          "type": "size_chart"
        },
        {
          "type": "quantity"
        },
        {
          "type": "buy_buttons"
        },
        {
          "type": "trust_cluster"
        },
        {
          "type": "delivery"
        }
      ]
    }
  ]
}
{% endschema %}
