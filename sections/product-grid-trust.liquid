{% comment %}
  TRUST.NO.OUTPUT — Product Grid Section

  A cyberpunk-inspired product collection grid featuring:
  - RGB glitch effects on hover
  - Terminal-style color variant display
  - Conscious "Add to Cart" interaction with delay
  - Sold out state with glitch overlay
  - Responsive grid layout (3-col → 1-col)

  Philosophy: Products as digital artifacts. Shopping becomes
  an act of conscious selection rather than impulse consumption.
{% endcomment %}

<style>
  /* ========================================
     Product Grid Section
     ======================================== */

  .product-grid-trust {
    position: relative;
    padding: var(--space-xl, 6rem) var(--space-md, 2rem);
    background: var(--color-void-black, #000000);
    overflow: hidden;
  }

  .product-grid-trust__container {
    max-width: 1400px;
    margin: 0 auto;
  }

  /* Subtle grid background pattern */
  .product-grid-trust::before {
    content: '';
    position: absolute;
    inset: 0;
    background-image:
      linear-gradient(rgba(0, 255, 240, 0.015) 1px, transparent 1px),
      linear-gradient(90deg, rgba(0, 255, 240, 0.015) 1px, transparent 1px);
    background-size: 60px 60px;
    opacity: 0.5;
    pointer-events: none;
  }

  /* ========================================
     Section Header
     ======================================== */

  .product-grid-trust__header {
    text-align: center;
    margin-bottom: var(--space-lg, 4rem);
  }

  .product-grid-trust__eyebrow {
    font-family: var(--font-mono, 'Space Mono', monospace);
    font-size: clamp(0.75rem, 2vw, 0.875rem);
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: var(--color-cyan, #00fff0);
    margin: 0 0 var(--space-sm, 1rem);
  }

  .product-grid-trust__headline {
    font-family: var(--font-mono, 'Space Mono', monospace);
    font-size: clamp(1.75rem, 5vw, 3rem);
    font-weight: 700;
    letter-spacing: 0.02em;
    color: #ffffff;
    margin: 0 0 var(--space-md, 2rem);
    position: relative;
  }

  /* Animated underline */
  .product-grid-trust__headline::after {
    content: '';
    display: block;
    width: 120px;
    height: 2px;
    background: linear-gradient(90deg, var(--color-cyan, #00fff0), var(--color-magenta, #ff00ff));
    margin: var(--space-sm, 1rem) auto 0;
    animation: pulse-width 2.4s ease-in-out infinite;
  }

  @keyframes pulse-width {
    0%,
    100% {
      width: 120px;
      opacity: 1;
    }
    50% {
      width: 90px;
      opacity: 0.7;
    }
  }

  .product-grid-trust__intro {
    font-family: var(--font-clean, sans-serif);
    font-size: clamp(1rem, 2.5vw, 1.25rem);
    font-weight: 300;
    line-height: 1.7;
    color: var(--color-gray-ghost, #6a6a7a);
    max-width: 700px;
    margin: 0 auto;
  }

  /* ========================================
     Product Grid Layout
     ======================================== */

  .product-grid-trust__grid {
    display: grid;
    /* Columns controlled via section setting (desktop). Fallback to 3. */
    grid-template-columns: repeat(var(--tno-columns, 3), minmax(0, 1fr));
    gap: var(--space-md, 2rem);
    margin-top: var(--space-lg, 4rem);
  }

  /* ========================================
     Responsive Design
     ======================================== */

  @media (max-width: 768px) {
    .product-grid-trust {
      padding: var(--space-lg, 4rem) var(--space-sm, 1rem);
    }

    .product-grid-trust__grid {
      grid-template-columns: 1fr;
      gap: var(--space-sm, 1rem);
    }
  }
</style>

{%- liquid
  assign collection = collections[section.settings.collection] | default: collections.all
  assign products_per_row = section.settings.products_per_row | default: 3
  assign eyebrow = section.settings.eyebrow | default: 'Digital Artifacts'
  assign headline = section.settings.headline | default: 'Products'
  assign intro = section.settings.intro | default: ''
-%}

<section class="product-grid-trust" id="product-grid-section">
  <div class="product-grid-trust__container">
    {%- comment %} Section Header {%- endcomment %}
    <div class="product-grid-trust__header">
      {%- if eyebrow != blank -%}
        <p class="product-grid-trust__eyebrow">{{ eyebrow }}</p>
      {%- endif -%}

      {%- if headline != blank -%}
        <h2 class="product-grid-trust__headline">{{ headline }}</h2>
      {%- endif -%}

      {%- if intro != blank -%}
        <p class="product-grid-trust__intro">{{ intro }}</p>
      {%- endif -%}
    </div>

    {%- comment %} Product Grid - Responsive carousel {%- endcomment %}
    <div class="tno-home-product-grid">
      <div class="tno-home-product-grid__controls">
        <button
          type="button"
          class="tno-home-product-grid__control tno-home-product-grid__control--prev"
        >
          ‹
        </button>
        <button
          type="button"
          class="tno-home-product-grid__control tno-home-product-grid__control--next"
        >
          ›
        </button>
      </div>
      <ul class="tno-home-product-grid__track">
        {%- for product in collection.products limit: section.settings.products_to_show -%}
          <li class="tno-home-product-grid__item">
            {% render 'card-product',
              card_product: product,
              card_style: 'trust',
              show_custom_add_to_cart: true,
              show_color_variants: true,
              lazy_load: true
            %}
          </li>
        {%- else -%}
          {%- comment %} Empty State {%- endcomment %}
          <li class="tno-home-product-grid__item" style="text-align: center; padding: 4rem; color: var(--color-gray-ghost);">
            <p style="font-family: var(--font-mono); letter-spacing: 0.05em;">
              System.Message: No products found in the selected collection.
            </p>
          </li>
        {%- endfor -%}
      </ul>
    </div>
  </div>
</section>


{% schema %}
{
  "name": "Product Grid (TNO)",
  "class": "section-product-grid-trust",
  "settings": [
    {
      "type": "header",
      "content": "Collection Settings"
    },
    {
      "type": "collection",
      "id": "collection",
      "label": "Collection",
      "info": "Select which collection to display"
    },
    {
      "type": "range",
      "id": "products_to_show",
      "min": 3,
      "max": 24,
      "step": 3,
      "default": 9,
      "label": "Products to Show"
    },
    {
      "type": "header",
      "content": "Section Header"
    },
    {
      "type": "text",
      "id": "eyebrow",
      "label": "Eyebrow Text",
      "default": "Digital Artifacts"
    },
    {
      "type": "text",
      "id": "headline",
      "label": "Headline",
      "default": "Products"
    },
    {
      "type": "textarea",
      "id": "intro",
      "label": "Introduction Text",
      "info": "Optional description below headline"
    },
    {
      "type": "header",
      "content": "Layout Settings"
    },
    {
      "type": "range",
      "id": "products_per_row",
      "min": 2,
      "max": 4,
      "step": 1,
      "default": 3,
      "label": "Products per Row (Desktop)",
      "info": "Mobile always shows 1 per row"
    }
  ],
  "presets": [
    {
      "name": "Product Grid (TNO)",
      "category": "Trust.No.Output"
    }
  ]
}
{% endschema %}
